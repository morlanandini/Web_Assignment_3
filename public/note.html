<!DOCTYPE html>
  <head>
    <link href='https://fonts.googleapis.com/css?family=Bona Nova' rel='stylesheet'>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.png">

  </head>
  <title>Add Note</title>
  <body  class="bb">
    <nav></nav>
  <!-- <ul>
      <li><a href="home.html">Home</a></li>
  <li><a href="register.html">SignUp</a></li>
  <li><a href="login.html">SignIn</a></li>
  <li><a href="note.html">Create Note</a></li>
</ul> -->
  <br>
  <table class="table" id="tab" style="color:white" border="1px">
    <th><tr><td>Notes Created by You</td></tr></th>
  
   
  </table>
  <!-- <p class="getnotes" style="color: white;">hi</p> -->
  <h3  class="heading">Create Your Note Here</h3>


  <form class="" action="" method="post" id=noteform>

    <textarea type="text" class="textarea1"  placeholder="Start writing here..." id="notetext" ></textarea>
    <br><br>
    <input type="submit" name="" size="150" class="create" value="Create Note" onClick="window.location.reload(true)">
    <!-- <button type="button" name="button" id='note-button' size="150" class="create">Get notes </button> -->

  </form>
<script type="module">
  import { fetchData, setCurrentUser, getCurrentUser } from '/scripts/main.js'

  function getnote()
  {
    let noteobj=getCurrentUser();
    let note=noteobj.emailId;
    fetchData("note/getnotes", noteobj, "POST")
  // .then((res) => res.json())
    .then((res) => {
      let table=document.getElementById("tab");
    res.forEach((user) => {
      let newNode=document.createElement('tr');
   let childNode0=document.createElement('td');
 
 
   let text2=document.createTextNode(user.noteContent);
   childNode0.appendChild(text2);

   newNode.appendChild(childNode0);

   table.appendChild(newNode);
  }
   

   
    
      // let p = document.querySelector('.getnotes');
      // // myobj = JSON.stringify(res);
      // for(let i=0;i<res.length;i++)
      // {
      //   p.innerHTML+=JSON.stringify(res[i].noteContent);

      // }
    )})




    .catch((err)=>console.log(`Error! ${err}`));
    // .catch((err) => {
    //   let p = document.querySelector('.error');
    //   p.innerHTML = err.message;
    // }) 
  }
  document.getElementById("table").innerHTML = getnote();

</script>

  <script type="module" src="scripts/myscript.js" charset="utf-8"></script>
  <script type="module" src="scripts/main.js" charset="utf-8"></script>


  </body>
</html>
